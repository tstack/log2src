# log2src Debugger

Mapping logs to source code to augment debugging, analysis, and understanding.

## Overview

Use logs generated by your application to drive a debugger and step through the source code similar to a record-replay debugger but lower tech.

<details>
  <summary>Click to view a GIF that demonstrates the idea.</summary>
  <p>
    <img src="https://raw.githubusercontent.com/ttiimm/log2src/main/docs/debugger-demo.gif" alt="Debugger Demo" />
  </p>
</details>

## Features
- Maps log lines back onto the source code to aid debugging by easing cognitive burden.
- Tries to reconstruct a portion of the program state by providing values of expressions & variables.
- Infer the call stack when possible based on an analysis of the source code.
- At the moment a subset of the Java & Rust programming languages are supported, but intending to try and work with most popular languages.

## Use Cases
This is an early prototype that only works with simple programs, demonstrated in the examples dir of this project. That being said, here are some of the types of use cases that this project hopes to improve over a traditional debugger:

1. Multi-threaded code: A connected debugger can impact the execution of multi-threaded code. Instead of connecting to your application and praying for the correct interleaving,  capture the issue in your  logs and replay as many times as you like.

2. Client server or machine-to-machine requests: Stepping across multiple processes, perhaps on separate machines, requires orchestrating multiple debuggers and racing against client time outs. Alternatively one could aggregate logs of all machines involved and debug at one's own pace. The client and server logs do not need to be implemented in the same programming language for this kind of functionality.

3. Production issues: Trying to debug on prod is risky and requires access to the infrastructure where the application is running. With log2src, as long as the logs are accessible to you, you can debug the problem offline without impacting production servers.

## Requirements
- VS Code (version 1.83.0 or later)

## Use

- Launch VS Code
- Open a project
- Open a log file
- Configure a Run and Debug like below, where source is configured with the root of the source directory and log is a path to a log file.
- Press `F5`

```
{
    "version": "0.2.0",
    "configurations": [
        {
            "type": "log2src",
            "request": "launch",
            "name": "Launch: log2src",
            "source": "${workspaceFolder}",
            "log": "app.log"
        }
    ]
}
```

## Options

### Launch

- `log_format` - highly recommended if using some location hints in the logs, like the file name and line number as this speeds up the mapping. Specify the regex to match log lines and **specify the file and line group** to aid mapping. Example regex given below with an example log line. 

  - Regex `^(?<timestamp>\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}) (?<level>\\w+)\\s+ (?<file>[\\w$.]+):(?<line>\\d+) - (?<body>.*)$`
  - Log `2025-04-10 22:12:52 INFO  SegmentedRaftLogWorker:139 - n0@group-6F7570313233-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1`

## Contributing
Please see the repository [Contributing](https://github.com/ttiimm/log2src?tab=readme-ov-file#contributing) section.

## Feedback and Questions
You can find the full list of issues at [Issue Tracker](https://github.com/ttiimm/log2src/issues). You can submit a [bug or feature suggestion](https://github.com/ttiimm/log2src/issues/new).

## License
This extension is licensed under [MIT License](https://github.com/ttiimm/log2src?tab=MIT-1-ov-file).